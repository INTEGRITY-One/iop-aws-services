    {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Parameters": {
    		"pNetworkStackName": {
    	   		"Description": "Name of an active Cloudformation stack that contains the networking resources, such as the VPC and subnets, that will be used in this stack.",
    	    		"Type": "String",
    	    		"Default": "BaselineNetwork"
    		}
        },
        "Resources": {
	    "BastionSecurityGroup": {
	        "Type": "AWS::EC2::SecurityGroup",
		"Properties": {
		    "GroupDescription": "Enables SSH Access to Bastion Hosts",
		    "VpcID": {
			"Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-VPCID"} }
		    },
		    "SecurityGroupIngress": [
			{
			    "IpProtocol": "tcp",
			    "FromPort": "22",
			    "ToPort": "22",
			    "CidrIp": "null",
			},
			{
			    "IpProtocol": "icmp",
			    "FromPort": "-1",
			    "ToPort": "-1",
			    "CidrIp": "null"
		        }

            "PubNACL": {
                "Type": "AWS::EC2::NetworkAcl",
                "Properties": {
                    "VpcID": {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-VPCID"} }
                    }
                }
            },
             "PrivNACL": {
                "Type": "AWS::EC2::NetworkAcl",
                "Properties": {
                    "VpcID": {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-VPCID"} }
                    }
                }
            },
             "ProtNACL": {
                "Type": "AWS::EC2::NetworkAcl",
                "Properties": {
                    "VpcID": {
                        "Ref": {"Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-VPCID"} }
                    }
                }
            },
            "PublicSubnet1NACLAssoc": {
                "Type" : "AWS::EC2::SubnetNetworkAclAssociation",
                "Properties" : {
                    "NetworkAclId" : {
                        "Ref": "PubNACL"
                    },
                    "SubnetId" : {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-publicSubnet1"} }
                    }
                }
            },
             "PublicSubnet2NACLAssoc": {
                "Type" : "AWS::EC2::SubnetNetworkAclAssociation",
                "Properties" : {
                    "NetworkAclId" : {
                        "Ref": "PubNACL"
                    },
                    "SubnetId" : {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-publicSubnet2"} }
                    }
                }
            },
             "PublicSubnet3NACLAssoc": {
                "Type" : "AWS::EC2::SubnetNetworkAclAssociation",
                "Properties" : {
                    "NetworkAclId" : {
                        "Ref": "PubNACL"
                    },
                    "SubnetId" : {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-publicSubnet3"} }
                    }
                }
            }, 
            "PrivateSubnet1NACLAssoc": {
                "Type" : "AWS::EC2::SubnetNetworkAclAssociation",
                "Properties" : {
                    "NetworkAclId" : {
                        "Ref": "PrivNACL"
                    },
                    "SubnetId" : {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-privateSubnet1"} }
                    }
                }
            },
            "PrivateSubnet2NACLAssoc": {
                "Type" : "AWS::EC2::SubnetNetworkAclAssociation",
                "Properties" : {
                    "NetworkAclId" : {
                        "Ref": "PrivNACL"
                    },
                    "SubnetId" : {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-privateSubnet2"} }
                    }
                }
            },
            "PrivateSubnet3NACLAssoc": {
                "Type" : "AWS::EC2::SubnetNetworkAclAssociation",
                "Properties" : {
                    "NetworkAclId" : {
                        "Ref": "PrivNACL"
                    },
                    "SubnetId" : {
                        "Ref": { "Fn::ImportValue": {"Fn::Sub": "${NetworkStackName}-privateSubnet3"} }
                    }
                }
            }
        },
	"Outputs": {
	    "PublicNACL": {
		"Description": "ID for public NACL",
		"Value": {
		    "Ref": "PubNACL"
		},
		"Export": {
		    "Name": {
			"Fn::Sub": "${AWS::StackName}-PublicNACL"
		    }
	    },
	     "PrivateNACL": {
		"Description": "ID for private NACL",
		"Value": {
		    "Ref": "PrivNACL"
		},
		"Export": {
		    "Name": {
			"Fn::Sub": "${AWS::StackName}-PrivateNACL"
		    }
	    },
	     "ProtectedNACL": {
		"Description": "ID for protected NACL",
		"Value": {
		    "Ref": "ProtNACL"
		},
		"Export": {
		    "Name": {
			"Fn::Sub": "${AWS::StackName}-ProtectedNACL"
		    }
	    },

    }